<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flow &mdash; Metin2Dev Wiki</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="https://raw.githubusercontent.com/Metin2-Dev/Assets/main/128_round_black.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Wiki</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Topics/index.html">Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Topics/Cryptography/index.html">Cryptography</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Topics/Cryptography/index.html#algorythm-types">Algorythm Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_0.html">Raw (Type 0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_1.html">-LZO (Type 1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_2.html">~XTEA(-LZO) (Type 2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_3.html">Panama (Type 3)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_4.html">HybridCrypt (Type 4)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_5.html">HybridCrypt SDB (Type 5)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Topics/Cryptography/type_6.html">~XTEA(-Snappy) (Type 6)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Topics/Formats/index.html">Formats</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Topics/Networking/index.html">Networking</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Incomplete Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Formats/index.html">Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Formats/texture_caching.html">DDS Texture Caching</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Formats/texture_caching.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Formats/texture_caching.html#rdch-format">RDCH Format</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../About/Contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../About/Changelogs/index.html">Changelogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../About/Maintenance/index.html">Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../About/Maintenance/workflow.html">Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../About/Maintenance/workflow.html#o-development-flow">1º - Development flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../About/Maintenance/workflow.html#o-beta-flow">2º - Beta flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../About/Maintenance/workflow.html#o-stable-release-flow">3º - Stable release flow</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Flow</li>


      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/Metin2-Dev/Wiki/blob/main/pages/Incomplete/Networking/Flow.md" class="fa fa-github"> Edit on GitHub</a>
      </li>

<style>
	.edit-guidelines {
		font-size: 14px;
		float: right;
		clear: both;
	}

	@media screen and (max-width: 480px) {
		.edit-guidelines {
			display: none;
		}
	}
</style>
<a class="edit-guidelines" href="">
	Check out how to contribute!
</a>


  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="flow">
<h1>Flow<a class="headerlink" href="#flow" title="Permalink to this heading">¶</a></h1>
<p>Networking in metin2 is composed by multiple agents, most of the agents
have the purpose of serving for a specific task, them being:</p>
<ul class="simple">
<li><p>Client (program the player uses to play)</p></li>
<li><p>Game (serves the game to the client)</p></li>
<li><p>Channels (individual game server processes that are clones of the server)</p></li>
<li><p>Database (stores/gives data for the game)</p></li>
<li><p>Authentication (authenticates the clients along with the game)</p></li>
</ul>
<p>We will go through how these communicate with each other at a concept
level step by step, assuming all the agents above are operational</p>
<p>For the rest of this page we are going to call the agents above as agents,
but keep in mind they can be an unique server process, a process of a
server, a client or what corresponds to their task</p>
<section id="concept">
<h2>Concept<a class="headerlink" href="#concept" title="Permalink to this heading">¶</a></h2>
<p>Let’s imagine we start the client, while starting the UI the first
thing it does is read from the settings which are the channels
to connect to and their respective ports</p>
<p>It starts a background task to probe the state of those channels,
if they are online and game information (like if the channel can be
accessed, how many players, and so on)</p>
<p>Assuming there is an available channel, we can now try to log in
by typing a username and password, it will try to send it to the
Authentication agent but before that synchronization comes first, after
being synchronized the data packets are encrypted and sent</p>
<section id="synchronization">
<h3>Synchronization<a class="headerlink" href="#synchronization" title="Permalink to this heading">¶</a></h3>
<p>Both agents need to be synchronized so that they know they are both valid
within each other, so to do that they use a <a class="reference internal" href="Synchronization/Handshake.html"><span class="std std-doc">Handshake</span></a>
or <a class="reference internal" href="Synchronization/IPE.html"><span class="std std-doc">IPE</span></a> method, or even both, if the latter is enabled</p>
<p>We are not going into detail on these methods here, but you should check
how they work to keep in mind for situations were they may come in the future</p>
<p>The final step is setting the phase, the authentication agent sends a packet
that tells the client that they will now be operating on the login phase,
you can read more on phases to also keep in mind, because they are an essential
part of the network flow, telling which packets are accepted at a given moment
depending on the current phase</p>
</section>
<section id="encryption">
<h3>Encryption<a class="headerlink" href="#encryption" title="Permalink to this heading">¶</a></h3>
<p>After they are synchronized, any packet data that will be exchanged between
agents will need to be encrypted, once again we are not going into detail,
so you can check how <a class="reference internal" href="Encryption/Encryption.html"><span class="std std-doc">Encryption</span></a> works to keep in mind</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>